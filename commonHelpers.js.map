{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["//У файлі pixabay-api.js зберігай функції для HTTP - запитів.\n    \nimport axios from 'axios';\n\nexport async function serviceSearchPhoto(searchImage, page, perPage) {\n    const API_KEY = \"43270282-4a5d06b91258db09a976f913c\";\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: searchImage,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: perPage,\n    });\n\n    const BASE_URL = \"https://pixabay.com/api/\";\n\n    try {\n        const response = await axios.get(`${BASE_URL}?${params}`);\n        return response.data;\n        \n    } catch (error) {\n        alert(error.message);\n    }\n}","//У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\nimport SimpleLightbox from \"simplelightbox\"; \nimport \"simplelightbox/dist/simple-lightbox.min.css\"; \nconst list = document.querySelector(\".js-list\");\n            const lightBox = new SimpleLightbox('.js-list a', {\n                captions: true,\n                captionsData: 'alt',\n                captionPosition: 'bottom', \n            });\n            \nexport function createMarkup(arr) {\n    const response = arr.map(({\n        id, webformatURL, tags, largeImageURL, likes, views, comments, downloads\n        }) => `\n        <li class=\"gallery-item\" data-id=${id} heigth=\"200\">\n            <a class=\"gallery-link\" href=${largeImageURL}>\n                <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\">\n            </a>\n            <div class=\"gallery-word\">\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Likes</h2>\n                    <p  class=\"count\">${likes}</p>\n                </div>\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Views</h2>\n                    <p  class=\"count\">${views}</p>\n                </div>\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Comments</h2>\n                    <p  class=\"count\">${comments}</p>\n                </div>\n                <div class=\"gallery-opis\">\n                    <h2 class=\"title\">Downloads</h2>\n                    <p  class=\"count\">${downloads}</p>\n                </div>\n            </div>\n        </li>\n    `).join(\"\");\n    list.insertAdjacentHTML(\"beforeend\", response); \n    lightBox.refresh();\n}","import iziToast from \"izitoast\";   \nimport \"izitoast/dist/css/iziToast.min.css\"; \nimport { serviceSearchPhoto } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector(\".js-search-form\");\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load-more\");\nconst input = document.querySelector(\".search-input\");\nlet page = 1;   \nconst perPage = 15;\nlet searchImage = \"\";\n    \nsearchForm.addEventListener(\"submit\", handleSubmit);\nloadBtn.addEventListener(\"click\", loadMore);\nloaderShow(); \nloadBtn.style.display = \"none\";\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    list.innerHTML = ''; \n    loaderHidden();\n    searchImage = event.currentTarget.elements.searchImage.value;\n    if (!searchImage) {\n        loaderShow();  \n        iziToast.warning({\n            title: 'Caution',\n            titleColor: 'white',\n            backgroundColor: '#EF4040',\n            messageColor: '#FFFFFF',\n            message: \"You forgot to enter important data\",\n            position: 'topRight',\n            });\n        return;\n    }\n\n    try {\n        loaderHidden();\n        page = 1; \n        const data = await serviceSearchPhoto(searchImage, page, perPage);\n        const totalHit = data.totalHits;\n\n        if (perPage * page >= totalHit) {\n            loadBtn.style.display = \"none\";            \n        }\n\n        if (data.hits.length === 0) {\n            loadBtn.style.display = \"none\";\n            iziToast.warning({\n                title: 'Warning',\n                titleColor: 'white',\n                backgroundColor: '#EF4040',\n                messageColor: '#FFFFFF',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n            });\n            loaderShow();           //14-04\n            searchForm.reset();     //14-04\n            return;\n        } else {\n            createMarkup(data.hits);\n                loadBtn.style.display = \"flex\";\n                loaderShow();\n        }\n        searchForm.reset();\n    }\n\n    catch(error) {\n        loaderHidden();\n        iziToast.error({\n            title: 'Error',\n            titleColor: 'white',\n            backgroundColor: '#FF0000',\n            messageColor: '#FFFFFF',\n            message: \"Error! Illegal operation\",\n            position: 'topRight',\n        }); \n        loaderShow();\n    }\n}    \n\nfunction loaderShow() {\n    loader.classList.add(\"hidden\");    \n}\n\nfunction loaderHidden() {\n    loader.classList.remove(\"hidden\");    \n}\n\nasync function loadMore() {\n    try {\n        loadBtn.style.display = \"flex\";\n        if (loadBtn) {     //loadMore 14-04\n            page += 1;\n        }          \n        const data = await serviceSearchPhoto(searchImage, page, perPage);\n        const totalHit = data.totalHits;\n\n        if (perPage * page >= totalHit) { \n            loadBtn.style.display = \"none\";\n            loaderShow();  //14-04\n            iziToast.warning({\n                    title: 'Warning',\n                    titleColor: 'black',\n                    backgroundColor: '#FFFF00',\n                    messageColor: '#000000',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                });   \n        }\n        \n        createMarkup(data.hits);\n        scrollPage();\n        searchForm.reset(); \n    }\n    catch (error) { console.log(error.message) }\n}\n\nfunction scrollPage() {\n    const liMarkup = list.querySelector(\".gallery-item\");\n    const liHeight = liMarkup.getBoundingClientRect().height;\n    window.scrollBy({\n        top: liHeight * 2,\n        behavior: 'smooth',\n    })\n}"],"names":["serviceSearchPhoto","searchImage","page","perPage","API_KEY","params","BASE_URL","axios","error","list","lightBox","SimpleLightbox","createMarkup","arr","response","id","webformatURL","tags","largeImageURL","likes","views","comments","downloads","searchForm","loader","loadBtn","handleSubmit","loadMore","loaderShow","event","loaderHidden","iziToast","data","totalHit","scrollPage","liHeight"],"mappings":"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"}